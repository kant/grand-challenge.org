{% extends "base.html" %}
{% load grandchallenge_tags %}
{% load guardian_tags %}
{% load admin_urls %}



{% block additionalCSS %}
    {% if site.skin %}
        /* custom css for this project */
        {% insert_file site.skin %}
    {% endif %}
{% endblock %}

{% block pageName %}
    {{ site.short_name }}
{% endblock %}

{% block bannerImage %}
    {% if site.banner %}
        <div class="row">
            <div class="card col-md-10 ml-auto mr-auto p-0">
                <div class="card-body p-0">
                    <a href="{% url 'challenge-homepage' challenge_short_name=site.short_name %}">
                        <img src="{{ site.banner.url }}" class="banner-image" alt="Banner for {{ site.title }}">
                    </a>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block challengeLinks %}
    {% block additionalNavItems %}{% endblock %}
    {% for page in pages %}
        {% if not page.hidden %}
            <li class="nav-item text-capitalize {% if page == currentpage %}active{% endif %}">
                <a href="{{ page.get_absolute_url }}">
                    {% if forloop.first %}
                        <i class="fas fa-home"></i>
                    {% else %}
                        <i class="fas fa-file"></i>
                    {% endif %}
                    <p>{% firstof page.display_title page.title %}</p>
                </a>
            </li>
        {% endif %}
    {% endfor %}

    {% if site.use_registration_page %}
        <li class="nav-item {% if request.resolver_match.view_name == 'participants:registration-create' %}active{% endif %}">
            <a href="{% url 'participants:registration-create' challenge_short_name=site.short_name %}">
                <i class="fas fa-sign-in-alt"></i>
                <p>Join</p>
            </a>
        </li>
    {% endif %}

    {% if site.use_evaluation %}

        {% if "change_challenge" in challenge_perms or user_is_participant %}

            {% if site.evaluation_config.use_teams %}
                <li class="nav-item {% if request.resolver_match.view_name == 'teams:list' %}active{% endif %}">
                    <a href="{% url 'teams:list' challenge_short_name=site.short_name %}">
                        <i class="fas fa-users"></i>
                        <p>Teams</p>
                    </a>
                </li>
            {% endif %}
            <li class="nav-item {% if request.resolver_match.view_name == 'evaluation:submission-create' %}active{% endif %}">
                <a href="{% url 'evaluation:submission-create' challenge_short_name=site.short_name %}">
                    <i class="fas fa-terminal"></i>
                    <p>Submit Your Predictions</p>
                </a>
            </li>

        {% endif %}
        <li class="nav-item {% if request.resolver_match.view_name == 'evaluation:result-list' %}active{% endif %}">
            <a href="{% url 'evaluation:result-list' challenge_short_name=site.short_name %}">
                <i class="fas fa-trophy"></i>
                <p>Leaderboard</p>
            </a>
        </li>

    {% endif %}
{% endblock %}

{% block challengeAdminLinks %}
    {% if "change_challenge" in challenge_perms %}
        {% with admin_views='update pages:list admins:list participants:list participants:registration-list uploads:list evaluation:config-update evaluation:method-list evaluation:submission-list evaluation:job-list' %}

            <li class="nav-item {% if request.resolver_match.view_name in admin_views.split %}submenu{% endif %}">
                <a data-toggle="collapse"
                   href="#challengeAdministration"
                   {% if request.resolver_match.view_name in admin_views.split %}aria-expanded="true"{% endif %}>
                    <i class="fas fa-cog"></i>
                    <p>Challenge Admin</p>
                    <span class="caret"></span>
                </a>
                <div class="collapse {% if request.resolver_match.view_name in admin_views.split %}show{% endif %}"
                     id="challengeAdministration">
                    <ul class="nav nav-collapse">
                        <li class="{% if request.resolver_match.view_name == 'update' %}active{% endif %}">
                            <a href="{% url 'update' challenge_short_name=site.short_name %}">
                                Challenge Settings
                            </a>
                        </li>
                        <li class="{% if request.resolver_match.view_name == 'pages:list' %}active{% endif %}">
                            <a href="{% url 'pages:list' challenge_short_name=site.short_name %}">
                                Pages
                            </a>
                        </li>
                        <li class="{% if request.resolver_match.view_name == 'admins:list' %}active{% endif %}">
                            <a href="{% url 'admins:list' challenge_short_name=site.short_name %}">
                                Admins
                            </a>
                        </li>
                        <li class="{% if request.resolver_match.view_name == 'participants:list' %}active{% endif %}">
                            <a href="{% url 'participants:list' challenge_short_name=site.short_name %}">
                                Participants
                            </a>
                        </li>
                        <li class="{% if request.resolver_match.view_name == 'participants:registration-list' %}active{% endif %}">
                            <a href="{% url 'participants:registration-list' challenge_short_name=site.short_name %}">
                                Participation Requests
                            </a>
                        </li>
                        <li class="{% if request.resolver_match.view_name == 'uploads:list' %}active{% endif %}">
                            <a href="{% url 'uploads:list' challenge_short_name=site.short_name %}">
                                Uploaded Files
                            </a>
                        </li>
                        {% if site.use_evaluation %}
                            <li class="{% if request.resolver_match.view_name == 'evaluation:config-update' %}active{% endif %}">
                                <a href="{% url 'evaluation:config-update' challenge_short_name=site.short_name %}">
                                    Evaluation Settings
                                </a>
                            </li>
                            <li class="{% if request.resolver_match.view_name == 'evaluation:method-list' %}active{% endif %}">
                                <a href="{% url 'evaluation:method-list' challenge_short_name=site.short_name %}">
                                    Evaluation Methods
                                </a>
                            </li>
                            <li class="{% if request.resolver_match.view_name == 'evaluation:submission-list' %}active{% endif %}">
                                <a href="{% url 'evaluation:submission-list' challenge_short_name=site.short_name %}">
                                    Evaluation Submissions
                                </a>
                            </li>
                            <li class="{% if request.resolver_match.view_name == 'evaluation:job-list' %}active{% endif %}">
                                <a href="{% url 'evaluation:job-list' challenge_short_name=site.short_name %}">
                                    Evaluation Jobs
                                </a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </li>

        {% endwith %}
    {% endif %}
{% endblock %}


{% block content %}
    {% block contentTitle %}
    {% endblock %}

    {% block pagecontent %}
        <p>redirect to first page here.</p>
    {% endblock %}
{% endblock %}
